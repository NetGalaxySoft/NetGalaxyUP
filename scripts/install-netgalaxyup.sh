#!/bin/bash

# ==========================================================================
#  install-netgalaxyup.sh ‚Äì –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ NetGalaxyUP
# --------------------------------------------------------------------------
#  –í–µ—Ä—Å–∏—è: 1.1
#  –î–∞—Ç–∞: 2025-07-02
#  –ê–≤—Ç–æ—Ä: Ilko Yordanov / NetGalaxy
# ==========================================================================
#
#  –°–∫—Ä–∏–ø—Ç—ä—Ç —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –Ω–∞–ø—ä–ª–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏ –ù–ï –∑–∞–¥–∞–≤–∞ –≤—ä–ø—Ä–æ—Å–∏.
#  –ö–ª–æ–Ω–∏—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ NetGalaxyUP, –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ–¥–≥–æ—Ç–≤—è —Å—Ä–µ–¥–∞—Ç–∞.
# ==========================================================================

echo "=================================================================="
echo " üöÄ NetGalaxyUP ‚Äì –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è"
echo "=================================================================="

# –ó–∞–¥–∞–≤–∞–Ω–µ –Ω–∞ URL —Å GitHub —Ç–æ–∫–µ–Ω
REPO_URL="https://NetGalaxySoft:<TOKEN>@github.com/NetGalaxySoft/NetGalaxyUP.git"

# –ü—Ä–æ–º—è–Ω–∞: —Ç–æ–∫–µ–Ω—ä—Ç —Å–µ –æ—á–∞–∫–≤–∞ –≤–µ—á–µ –¥–∞ –µ –≤–≥—Ä–∞–¥–µ–Ω –≤ URL –ø—Ä–∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ —Å curl
# –ó–∞–±–µ–ª–µ–∂–∫–∞: URL-—Ç–æ –ù–ï —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –±–µ–∑ —Ç–æ–∫–µ–Ω (–∑–∞ –¥–∞ –Ω–µ —Å–ø—Ä–µ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ)

# –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è ~/projects –∞–∫–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
mkdir -p ~/projects
cd ~/projects || exit 1

# –ê–∫–æ –ø—Ä–æ–µ–∫—Ç—ä—Ç –≤–µ—á–µ –µ –∫–ª–æ–Ω–∏—Ä–∞–Ω ‚Äì –ø—Ä–æ–ø—É—Å–∫–∞–º–µ
if [[ -d "NetGalaxyUP" ]]; then
  echo "‚úÖ –ü—Ä–æ–µ–∫—Ç—ä—Ç NetGalaxyUP –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞. –ü—Ä–æ–ø—É—Å–∫–∞–Ω–µ –Ω–∞ –∫–ª–æ–Ω–∏—Ä–∞–Ω–µ—Ç–æ."
else
  echo "‚è≥ –ö–ª–æ–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç GitHub..."
  git clone "$REPO_URL"
fi

cd NetGalaxyUP || exit 1

# === –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ===
echo "=================================================================="
echo " üêç –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (backend)..."
echo "=================================================================="

cd backend || exit 1
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip

if [[ -f "requirements.txt" ]]; then
  pip install -r requirements.txt
  echo "‚úÖ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏—Ç–µ —Å–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–∏."
else
  echo "‚ö†Ô∏è –õ–∏–ø—Å–≤–∞ —Ñ–∞–π–ª requirements.txt ‚Äì –ø—Ä–æ–ø—É—Å–∫–∞–º pip install."
fi

deactivate
cd ..

# === –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ frontend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ===
echo "=================================================================="
echo " üåê –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ JavaScript –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (frontend)..."
echo "=================================================================="

cd frontend || exit 1
npm install
echo "‚úÖ JavaScript –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏—Ç–µ —Å–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–∏."
cd ..

# === –§–∏–Ω–∞–ª–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ ===
echo "=================================================================="
echo "‚úÖ –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è—Ç–∞ –Ω–∞ NetGalaxyUP –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ."
echo "üìÅ –ü—Ä–æ–µ–∫—Ç—ä—Ç —Å–µ –Ω–∞–º–∏—Ä–∞ –≤: ~/projects/NetGalaxyUP"
echo
echo "üëâ –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ backend:"
echo "   cd ~/projects/NetGalaxyUP/backend"
echo "   source venv/bin/activate"
echo "   uvicorn main:app --reload --host 0.0.0.0 --port 8000"
echo
echo "üëâ –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ frontend:"
echo "   cd ~/projects/NetGalaxyUP/frontend"
echo "   npm run dev"
echo
echo "=================================================================="
